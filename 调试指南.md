# Mekko图调试指南

## 如何检查控制台日志

### 步骤1：打开浏览器开发者工具

**Chrome/Edge浏览器：**
- 按 `F12` 键，或
- 按 `Ctrl+Shift+I` (Windows) / `Cmd+Option+I` (Mac)，或
- 右键点击页面 → 选择"检查"或"Inspect"

**Safari浏览器：**
- 首先需要启用开发者工具：Safari → 偏好设置 → 高级 → 勾选"在菜单栏中显示'开发'菜单"
- 然后按 `Cmd+Option+I`，或
- 开发 → 显示Web检查器

**Firefox浏览器：**
- 按 `F12` 键，或
- 按 `Ctrl+Shift+I` (Windows) / `Cmd+Option+I` (Mac)

### 步骤2：切换到Console（控制台）标签

在开发者工具窗口中，点击顶部的 **"Console"** 标签页。

### 步骤3：查看日志信息

打开"生意大盘观测"页面后，控制台会显示以下日志：

#### 📊 数据加载日志
```
开始加载Excel文件: /dataset.xlsx?t=...
Excel数据加载成功: {数据条数: ..., 维度数量: ..., 维度列表: [...]}
```

#### 📊 维度识别日志
```
📊 所有可用维度: ["维度1 (dimension1)", "维度2 (dimension2)", ...]
```

#### ✅ 维度选择日志（成功时）
```
✅ 找到商品名和省份tagging维度: {xAxis: "商品名", yAxis: "省份tagging"}
🎯 最终选择的维度: {xAxis: "商品名", yAxis: "省份tagging"}
```

#### ⚠️ 维度选择日志（未找到时）
```
⚠️ 未找到商品名或省份tagging，使用默认维度: {xAxis: "...", yAxis: "..."}
🎯 最终选择的维度: {xAxis: "...", yAxis: "..."}
```

#### 🔄 Mekko数据计算日志
```
🔄 开始计算mekkoData: {totalDataPoints: ..., xAxisKey: ..., yAxisKey: ...}
💰 过滤后数据统计: {filteredCount: ..., totalValue: "..."}
📈 X轴维度分组结果: {uniqueXValues: ..., validPoints: ..., sampleXValues: [...]}
✅ mekkoData计算结果: {totalItems: ..., totalShare: "...%", sampleItem: {...}}
```

#### ❌ 错误日志（如果有问题）
```
❌ mekkoData: marketData为空
❌ mekkoData: 维度未选择
❌ mekkoData: 过滤后总金额为0
❌ mekkoData: X轴维度分组后无数据
```

### 步骤4：检查关键信息

请检查以下关键信息：

1. **维度是否正确识别？**
   - 查看 `📊 所有可用维度` 日志
   - 确认是否包含"商品名"和"省份tagging"相关的维度

2. **维度是否自动选择？**
   - 查看 `✅ 找到商品名和省份tagging维度` 或 `⚠️ 未找到...` 日志
   - 查看 `🎯 最终选择的维度` 日志

3. **数据是否正确计算？**
   - 查看 `✅ mekkoData计算结果` 日志
   - 确认 `totalItems` 大于0
   - 确认 `totalShare` 接近100%

4. **是否有错误？**
   - 查看是否有 `❌` 开头的错误日志
   - 查看红色错误信息

### 步骤5：清除日志（可选）

如果想查看新的日志，可以：
- 点击控制台左上角的 🚫 清除按钮，或
- 按 `Ctrl+L` (Windows) / `Cmd+K` (Mac)

### 常见问题排查

**问题1：看不到任何日志**
- 确认开发者工具已打开
- 确认在Console标签页
- 刷新页面重新加载

**问题2：看到"维度未选择"错误**
- 检查Excel文件是否正确加载
- 检查维度配置是否正确

**问题3：看到"X轴维度分组后无数据"错误**
- 检查选择的维度是否正确
- 检查数据中是否有对应的维度值
- 检查数据筛选条件是否过于严格

**问题4：图表仍然不显示**
- 查看 `✅ mekkoData计算结果` 中的 `totalItems` 是否为0
- 查看是否有JavaScript错误（红色文字）
- 尝试手动选择维度

### 需要帮助？

如果问题仍然存在，请提供：
1. 控制台中的完整日志（特别是带📊、✅、❌、⚠️标记的）
2. Excel文件中"商品名"和"省份tagging"列的确切名称
3. 任何红色错误信息

