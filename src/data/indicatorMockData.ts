import {
  Indicator,
  IndicatorHistoryData,
  IndicatorEffectAnalysis,
  IndicatorRecommendation,
  IndicatorBaseline,
  IndicatorTargetPlan,
  Strategy,
} from '../types/indicator';

// 模拟策略数据
export const mockStrategies: Strategy[] = [
  {
    id: 'strategy1',
    name: '提升零售渠道份额',
    description: '通过加强零售渠道合作、优化价格策略，提升零售渠道市场份额',
    focusAreas: ['零售渠道', '价格策略', '渠道合作'],
    targetOutcomes: ['零售渠道份额提升', '市场覆盖扩大'],
  },
  {
    id: 'strategy2',
    name: '拓展内分泌科应用',
    description: '通过学术推广和医生教育，提升内分泌科产品认知和使用',
    focusAreas: ['学术推广', '医生教育', '科室拓展'],
    targetOutcomes: ['内分泌科份额提升', '适应症拓展'],
  },
  {
    id: 'strategy3',
    name: '提升影响型医院渗透率',
    description: '重点提升影响型医院的产品渗透率，发挥辐射带动作用',
    focusAreas: ['影响型医院', '渗透率', '学术推广'],
    targetOutcomes: ['渗透率提升', '市场份额增长'],
  },
];

// 模拟指标长清单（1000+指标，这里展示部分）
export const mockIndicators: Indicator[] = [
  // 结果指标
  {
    id: 'ind1',
    name: '市场份额',
    category: 'result',
    description: '产品在目标市场中的份额占比',
    calculationMethod: '产品销售额 / 市场总销售额 × 100%',
    dataSource: 'IQVIA市场数据',
    dataLogic: '从IQVIA数据库提取目标市场销售额，计算产品占比',
    unit: '%',
    isCore: true,
    tags: ['结果指标', '市场份额', '核心指标'],
    createdAt: new Date('2024-01-01'),
    updatedAt: new Date('2024-01-01'),
  },
  {
    id: 'ind2',
    name: '分子式份额',
    category: 'result',
    description: '产品在分子式市场中的份额',
    calculationMethod: '产品销售额 / 分子式市场总销售额 × 100%',
    dataSource: 'IQVIA市场数据',
    dataLogic: '从IQVIA数据库提取分子式市场数据，计算产品占比',
    unit: '%',
    isCore: true,
    tags: ['结果指标', '分子式份额', '核心指标'],
    createdAt: new Date('2024-01-01'),
    updatedAt: new Date('2024-01-01'),
  },
  {
    id: 'ind3',
    name: '分子式内份额',
    category: 'result',
    description: '产品在晖致分子式产品中的份额',
    calculationMethod: '产品销售额 / 晖致分子式产品总销售额 × 100%',
    dataSource: '内部销售数据',
    dataLogic: '从内部销售系统提取晖致分子式产品销售额，计算占比',
    unit: '%',
    isCore: true,
    tags: ['结果指标', '分子式内份额', '核心指标'],
    createdAt: new Date('2024-01-01'),
    updatedAt: new Date('2024-01-01'),
  },
  // 过程指标
  {
    id: 'ind4',
    name: '解限率',
    category: 'process',
    description: '已解限医院数量占目标医院总数的比例',
    calculationMethod: '已解限医院数 / 目标医院总数 × 100%',
    dataSource: '内部解限数据',
    dataLogic: '从解限管理系统提取已解限医院数和目标医院总数',
    unit: '%',
    isCore: true,
    tags: ['过程指标', '解限', '核心指标'],
    createdAt: new Date('2024-01-01'),
    updatedAt: new Date('2024-01-01'),
  },
  {
    id: 'ind5',
    name: '渗透率',
    category: 'process',
    description: '使用产品的医院数量占目标医院总数的比例',
    calculationMethod: '使用产品的医院数 / 目标医院总数 × 100%',
    dataSource: '内部销售数据',
    dataLogic: '从销售系统提取有销售记录的医院数和目标医院总数',
    unit: '%',
    isCore: true,
    tags: ['过程指标', '渗透', '核心指标'],
    createdAt: new Date('2024-01-01'),
    updatedAt: new Date('2024-01-01'),
  },
  {
    id: 'ind6',
    name: '影响型医院渗透率',
    category: 'process',
    description: '使用产品的影响型医院数量占影响型医院总数的比例',
    calculationMethod: '使用产品的影响型医院数 / 影响型医院总数 × 100%',
    dataSource: '内部销售数据',
    dataLogic: '从销售系统提取影响型医院中有销售记录的医院数和总数',
    unit: '%',
    isCore: true,
    tags: ['过程指标', '影响型医院', '渗透'],
    createdAt: new Date('2024-01-01'),
    updatedAt: new Date('2024-01-01'),
  },
  {
    id: 'ind7',
    name: '稳定分销率',
    category: 'process',
    description: '保持稳定分销的医院数量占目标医院总数的比例',
    calculationMethod: '稳定分销医院数 / 目标医院总数 × 100%',
    dataSource: '内部分销数据',
    dataLogic: '从分销系统提取连续3个月以上有分销记录的医院数',
    unit: '%',
    isCore: false,
    tags: ['过程指标', '分销', '做广'],
    createdAt: new Date('2024-01-01'),
    updatedAt: new Date('2024-01-01'),
  },
  {
    id: 'ind8',
    name: '列名率',
    category: 'process',
    description: '产品已列名的医院数量占目标医院总数的比例',
    calculationMethod: '已列名医院数 / 目标医院总数 × 100%',
    dataSource: '内部列名数据',
    dataLogic: '从列名管理系统提取已列名医院数和目标医院总数',
    unit: '%',
    isCore: false,
    tags: ['过程指标', '列名', '做广'],
    createdAt: new Date('2024-01-01'),
    updatedAt: new Date('2024-01-01'),
  },
  {
    id: 'ind9',
    name: '零售渠道覆盖率',
    category: 'process',
    description: '覆盖的零售终端数量占目标零售终端总数的比例',
    calculationMethod: '覆盖零售终端数 / 目标零售终端总数 × 100%',
    dataSource: '内部渠道数据',
    dataLogic: '从渠道管理系统提取有合作的零售终端数和目标总数',
    unit: '%',
    isCore: false,
    tags: ['过程指标', '零售渠道', '覆盖率'],
    createdAt: new Date('2024-01-01'),
    updatedAt: new Date('2024-01-01'),
  },
  {
    id: 'ind10',
    name: '学术活动频次',
    category: 'process',
    description: '每月开展的学术活动次数',
    calculationMethod: '统计每月学术活动场次',
    dataSource: '内部活动数据',
    dataLogic: '从活动管理系统提取学术活动记录，按月统计',
    unit: '次/月',
    isCore: false,
    tags: ['过程指标', '学术推广', '活动'],
    createdAt: new Date('2024-01-01'),
    updatedAt: new Date('2024-01-01'),
  },
  // 投入指标
  {
    id: 'ind11',
    name: '销售人员投入',
    category: 'input',
    description: '投入的销售人员数量',
    calculationMethod: '统计销售人员总数',
    dataSource: '人力资源数据',
    dataLogic: '从HR系统提取销售人员数量',
    unit: '人',
    isCore: false,
    tags: ['投入指标', '人力', '资源'],
    createdAt: new Date('2024-01-01'),
    updatedAt: new Date('2024-01-01'),
  },
  {
    id: 'ind12',
    name: '市场投入金额',
    category: 'input',
    description: '市场推广投入的总金额',
    calculationMethod: '统计市场推广相关费用总和',
    dataSource: '财务数据',
    dataLogic: '从财务系统提取市场推广相关费用',
    unit: '万元',
    isCore: false,
    tags: ['投入指标', '费用', '资源'],
    createdAt: new Date('2024-01-01'),
    updatedAt: new Date('2024-01-01'),
  },
  // 效率指标
  {
    id: 'ind13',
    name: '人均销售额',
    category: 'efficiency',
    description: '每个销售人员平均产生的销售额',
    calculationMethod: '总销售额 / 销售人员数',
    dataSource: '内部销售数据 + 人力资源数据',
    dataLogic: '从销售系统提取销售额，从HR系统提取销售人员数，计算比值',
    unit: '万元/人',
    isCore: false,
    tags: ['效率指标', '人均', 'ROI'],
    createdAt: new Date('2024-01-01'),
    updatedAt: new Date('2024-01-01'),
  },
  {
    id: 'ind14',
    name: '投入产出比',
    category: 'efficiency',
    description: '市场投入与销售额的比值',
    calculationMethod: '销售额 / 市场投入金额',
    dataSource: '财务数据 + 销售数据',
    dataLogic: '从财务系统提取市场投入，从销售系统提取销售额，计算比值',
    unit: '倍',
    isCore: false,
    tags: ['效率指标', 'ROI', '投入产出'],
    createdAt: new Date('2024-01-01'),
    updatedAt: new Date('2024-01-01'),
  },
];

// 模拟指标历史数据
export const mockIndicatorHistoryData: IndicatorHistoryData[] = [
  // 解限率历史数据（2022-2024，分省）
  { indicatorId: 'ind4', period: '2022-Q1', province: '北京', value: 65.2 },
  { indicatorId: 'ind4', period: '2022-Q2', province: '北京', value: 67.5 },
  { indicatorId: 'ind4', period: '2022-Q3', province: '北京', value: 68.8 },
  { indicatorId: 'ind4', period: '2022-Q4', province: '北京', value: 70.2 },
  { indicatorId: 'ind4', period: '2023-Q1', province: '北京', value: 72.5 },
  { indicatorId: 'ind4', period: '2023-Q2', province: '北京', value: 74.2 },
  { indicatorId: 'ind4', period: '2023-Q3', province: '北京', value: 75.8 },
  { indicatorId: 'ind4', period: '2023-Q4', province: '北京', value: 77.2 },
  { indicatorId: 'ind4', period: '2024-Q1', province: '北京', value: 78.5 },
  { indicatorId: 'ind4', period: '2022-Q1', province: '上海', value: 68.5 },
  { indicatorId: 'ind4', period: '2022-Q2', province: '上海', value: 70.2 },
  { indicatorId: 'ind4', period: '2022-Q3', province: '上海', value: 71.8 },
  { indicatorId: 'ind4', period: '2022-Q4', province: '上海', value: 73.2 },
  { indicatorId: 'ind4', period: '2023-Q1', province: '上海', value: 74.8 },
  { indicatorId: 'ind4', period: '2023-Q2', province: '上海', value: 76.2 },
  { indicatorId: 'ind4', period: '2023-Q3', province: '上海', value: 77.5 },
  { indicatorId: 'ind4', period: '2023-Q4', province: '上海', value: 78.8 },
  { indicatorId: 'ind4', period: '2024-Q1', province: '上海', value: 79.5 },
  // 渗透率历史数据
  { indicatorId: 'ind5', period: '2022-Q1', province: '北京', value: 45.2 },
  { indicatorId: 'ind5', period: '2022-Q2', province: '北京', value: 46.8 },
  { indicatorId: 'ind5', period: '2022-Q3', province: '北京', value: 48.2 },
  { indicatorId: 'ind5', period: '2022-Q4', province: '北京', value: 49.5 },
  { indicatorId: 'ind5', period: '2023-Q1', province: '北京', value: 51.2 },
  { indicatorId: 'ind5', period: '2023-Q2', province: '北京', value: 52.8 },
  { indicatorId: 'ind5', period: '2023-Q3', province: '北京', value: 54.2 },
  { indicatorId: 'ind5', period: '2023-Q4', province: '北京', value: 55.5 },
  { indicatorId: 'ind5', period: '2024-Q1', province: '北京', value: 56.8 },
  { indicatorId: 'ind5', period: '2022-Q1', province: '上海', value: 48.5 },
  { indicatorId: 'ind5', period: '2022-Q2', province: '上海', value: 50.2 },
  { indicatorId: 'ind5', period: '2022-Q3', province: '上海', value: 51.8 },
  { indicatorId: 'ind5', period: '2022-Q4', province: '上海', value: 53.2 },
  { indicatorId: 'ind5', period: '2023-Q1', province: '上海', value: 54.8 },
  { indicatorId: 'ind5', period: '2023-Q2', province: '上海', value: 56.2 },
  { indicatorId: 'ind5', period: '2023-Q3', province: '上海', value: 57.5 },
  { indicatorId: 'ind5', period: '2023-Q4', province: '上海', value: 58.8 },
  { indicatorId: 'ind5', period: '2024-Q1', province: '上海', value: 59.5 },
];

// 模拟指标效果分析
export const mockIndicatorEffectAnalyses: IndicatorEffectAnalysis[] = [
  {
    indicatorId: 'ind4',
    indicatorName: '解限率',
    impactScore: 85,
    impactLevel: 'high',
    correlationWithResult: 0.78,
    historicalTrend: [
      {
        period: '2022-Q1',
        avgValue: 66.8,
        variance: 12.5,
        provinces: [
          { province: '北京', value: 65.2, change: 2.3 },
          { province: '上海', value: 68.5, change: 1.7 },
        ],
      },
      {
        period: '2023-Q1',
        avgValue: 73.6,
        variance: 10.2,
        provinces: [
          { province: '北京', value: 72.5, change: 2.1 },
          { province: '上海', value: 74.8, change: 1.5 },
        ],
      },
    ],
    influencingFactors: [
      {
        factor: '集采政策',
        impact: 0.65,
        evidence: '集采政策变化直接影响医院解限意愿',
      },
      {
        factor: '解限团队投入',
        impact: 0.58,
        evidence: '解限团队人员投入与解限率呈正相关',
      },
    ],
    recommendation: '解限率是影响市场份额的关键过程指标，建议持续投入解限团队资源，重点关注集采政策变化对解限的影响。',
  },
  {
    indicatorId: 'ind5',
    indicatorName: '渗透率',
    impactScore: 82,
    impactLevel: 'high',
    correlationWithResult: 0.72,
    historicalTrend: [
      {
        period: '2022-Q1',
        avgValue: 46.8,
        variance: 15.2,
        provinces: [
          { province: '北京', value: 45.2, change: 1.6 },
          { province: '上海', value: 48.5, change: 1.3 },
        ],
      },
      {
        period: '2023-Q1',
        avgValue: 53.0,
        variance: 12.8,
        provinces: [
          { province: '北京', value: 51.2, change: 1.4 },
          { province: '上海', value: 54.8, change: 1.2 },
        ],
      },
    ],
    influencingFactors: [
      {
        factor: '学术推广活动',
        impact: 0.62,
        evidence: '学术活动频次与渗透率提升呈正相关',
      },
      {
        factor: '医生关系',
        impact: 0.55,
        evidence: '医生关系质量影响产品使用意愿',
      },
    ],
    recommendation: '渗透率是提升市场份额的重要过程指标，建议加强学术推广和医生关系建设。',
  },
  {
    indicatorId: 'ind6',
    indicatorName: '影响型医院渗透率',
    impactScore: 88,
    impactLevel: 'high',
    correlationWithResult: 0.82,
    historicalTrend: [],
    influencingFactors: [
      {
        factor: '影响型医院辐射作用',
        impact: 0.75,
        evidence: '影响型医院渗透率提升能带动周边医院和零售终端销售',
      },
    ],
    recommendation: '影响型医院渗透率是核心过程指标，建议作为重点考核指标。',
  },
];

// 模拟考核指标建议（针对策略1：提升零售渠道份额）
export const mockIndicatorRecommendations: IndicatorRecommendation[] = [
  {
    indicatorId: 'ind9',
    indicatorName: '零售渠道覆盖率',
    category: 'process',
    advantages: [
      '直接反映零售渠道拓展情况',
      '数据获取简单，计算清晰',
      '与零售渠道份额策略高度相关',
    ],
    disadvantages: [
      '仅反映覆盖广度，不反映深度',
      '需要结合其他指标评估渠道质量',
    ],
    applicableScenarios: ['零售渠道拓展策略', '渠道覆盖评估'],
    priorityScore: 85,
    strategyAlignment: {
      strategyId: 'strategy1',
      strategyName: '提升零售渠道份额',
      alignmentScore: 90,
      reasoning: '零售渠道覆盖率是提升零售渠道份额的基础指标，覆盖率的提升直接影响市场份额。',
    },
  },
  {
    indicatorId: 'ind4',
    indicatorName: '解限率',
    category: 'process',
    advantages: [
      '是市场准入的基础指标',
      '历史数据完整，可追溯性强',
      '与市场份额相关性高',
    ],
    disadvantages: [
      '受集采政策影响较大',
      '解限后不一定立即带来销售',
    ],
    applicableScenarios: ['市场准入策略', '医院拓展'],
    priorityScore: 80,
    strategyAlignment: {
      strategyId: 'strategy1',
      strategyName: '提升零售渠道份额',
      alignmentScore: 70,
      reasoning: '解限率虽然主要针对医院，但医院解限后可能带动零售渠道销售。',
    },
  },
  {
    indicatorId: 'ind5',
    indicatorName: '渗透率',
    category: 'process',
    advantages: [
      '反映产品使用广度',
      '与市场份额相关性高',
      '数据稳定可靠',
    ],
    disadvantages: [
      '需要结合其他指标评估使用深度',
      '渗透率提升不一定带来份额提升',
    ],
    applicableScenarios: ['市场拓展策略', '产品推广'],
    priorityScore: 75,
    strategyAlignment: {
      strategyId: 'strategy1',
      strategyName: '提升零售渠道份额',
      alignmentScore: 65,
      reasoning: '渗透率主要反映医院使用情况，与零售渠道策略关联度中等。',
    },
  },
  {
    indicatorId: 'ind1',
    indicatorName: '市场份额',
    category: 'result',
    advantages: [
      '直接反映策略执行效果',
      '是最终结果指标',
      '数据权威可靠',
    ],
    disadvantages: [
      '是结果指标，不能直接指导过程',
      '受多种因素影响，难以单一归因',
    ],
    applicableScenarios: ['结果评估', '策略效果评估'],
    priorityScore: 90,
    strategyAlignment: {
      strategyId: 'strategy1',
      strategyName: '提升零售渠道份额',
      alignmentScore: 95,
      reasoning: '市场份额是策略的最终目标，必须作为核心考核指标。',
    },
  },
];

// 模拟指标基线
export const mockIndicatorBaselines: IndicatorBaseline[] = [
  {
    indicatorId: 'ind4',
    indicatorName: '解限率',
    nationalBaseline: {
      current: 75.2,
      historicalAvg: 72.5,
      historicalMedian: 73.0,
      trend: 'up',
    },
    provinceBaselines: [
      {
        province: '北京',
        current: 78.5,
        historicalAvg: 75.2,
        variance: 8.5,
        trend: 'up',
      },
      {
        province: '上海',
        current: 79.5,
        historicalAvg: 76.8,
        variance: 7.2,
        trend: 'up',
      },
      {
        province: '广东',
        current: 72.8,
        historicalAvg: 70.5,
        variance: 10.2,
        trend: 'up',
      },
    ],
    environmentalFactors: [
      {
        factor: '集采政策',
        impact: 'positive',
        description: '新一轮集采政策有利于产品解限',
      },
      {
        factor: '医保政策',
        impact: 'neutral',
        description: '医保政策保持稳定',
      },
    ],
  },
  {
    indicatorId: 'ind5',
    indicatorName: '渗透率',
    nationalBaseline: {
      current: 55.8,
      historicalAvg: 52.5,
      historicalMedian: 53.0,
      trend: 'up',
    },
    provinceBaselines: [
      {
        province: '北京',
        current: 56.8,
        historicalAvg: 53.2,
        variance: 12.5,
        trend: 'up',
      },
      {
        province: '上海',
        current: 59.5,
        historicalAvg: 55.8,
        variance: 11.2,
        trend: 'up',
      },
      {
        province: '广东',
        current: 52.2,
        historicalAvg: 49.5,
        variance: 15.8,
        trend: 'up',
      },
    ],
    environmentalFactors: [
      {
        factor: '学术推广投入',
        impact: 'positive',
        description: '学术推广投入增加有利于渗透率提升',
      },
    ],
  },
];

// 模拟指标目标值规划
export const mockIndicatorTargetPlans: IndicatorTargetPlan[] = [
  {
    indicatorId: 'ind4',
    indicatorName: '解限率',
    targetValue: {
      national: 82.0,
      provinces: [
        {
          province: '北京',
          target: 85.0,
          baseline: 78.5,
          growthRate: 8.3,
          reasoning: '北京解限率历史表现良好，且集采政策有利，目标设定较高',
        },
        {
          province: '上海',
          target: 84.0,
          baseline: 79.5,
          growthRate: 5.7,
          reasoning: '上海解限率已较高，增长空间有限，目标设定适中',
        },
        {
          province: '广东',
          target: 78.0,
          baseline: 72.8,
          growthRate: 7.1,
          reasoning: '广东解限率有较大提升空间，目标设定合理',
        },
      ],
    },
    planningBasis: {
      historicalTrend: '解限率在过去8个季度持续上升，平均季度增长约1.5%',
      provinceVariance: '各省份解限率方差在7-15%之间，北京、上海表现较好，广东等省份有提升空间',
      environmentalChange: '新一轮集采政策有利于产品解限，预计带来2-3%的提升',
      salesGrowthImpact: '全国销售增速目标15%，解限率需要相应提升以支撑销售增长',
    },
    confidence: 'high',
    riskWarnings: [
      '集采政策变化可能影响解限进度',
      '部分省份解限团队资源可能不足',
    ],
    needsManualAdjustment: false,
  },
  {
    indicatorId: 'ind5',
    indicatorName: '渗透率',
    targetValue: {
      national: 62.0,
      provinces: [
        {
          province: '北京',
          target: 63.0,
          baseline: 56.8,
          growthRate: 10.9,
          reasoning: '北京渗透率有提升空间，目标设定较高',
        },
        {
          province: '上海',
          target: 65.0,
          baseline: 59.5,
          growthRate: 9.2,
          reasoning: '上海渗透率历史表现良好，目标设定较高',
        },
        {
          province: '广东',
          target: 58.0,
          baseline: 52.2,
          growthRate: 11.1,
          reasoning: '广东渗透率有较大提升空间，目标设定合理',
        },
      ],
    },
    planningBasis: {
      historicalTrend: '渗透率在过去8个季度持续上升，平均季度增长约1.2%',
      provinceVariance: '各省份渗透率方差在11-16%之间，上海表现最好，广东等省份有提升空间',
      environmentalChange: '学术推广投入增加，预计带来渗透率提升',
      salesGrowthImpact: '全国销售增速目标15%，渗透率需要相应提升以支撑销售增长',
    },
    confidence: 'medium',
    riskWarnings: [
      '渗透率提升需要时间，可能无法立即见效',
      '需要持续投入学术推广资源',
    ],
    needsManualAdjustment: true,
    adjustmentReason: '渗透率目标值需要结合具体产品策略和资源投入情况，建议人工调整',
  },
];


